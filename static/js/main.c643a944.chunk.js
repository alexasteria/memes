(this.webpackJsonpmem=this.webpackJsonpmem||[]).push([[0],{161:function(e,t,n){e.exports=n(258)},258:function(e,t,n){"use strict";n.r(t);n(162),n(188),n(190),n(191),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230);var a=n(0),r=n.n(a),c=n(36),i=n.n(c),l=n(22),u=n.n(l),o=n(60),s=n.n(o),h=n(89),m=n(11),d=n(45),p=n.n(d),g=(n(59),n(10)),f=function(e){var t=e.id,n=e.go,c=(e.fetchedUser,e.setImg),i=Object(a.useState)(["https://sun9-56.userapi.com/baoxdsF_-He5F9NiEG9813iB6jspc3Pr2Vk3nQ/0R1ob9TJK2s.jpg","https://i.imgflip.com/1bij.jpg","https://sun9-34.userapi.com/Jb02ospH0-uzudorTg4yUWXDGg5CDtELMa68nA/XLgm_Xs8kZY.jpg","https://sun9-53.userapi.com/kQoYlGSpvfSLVN4AiaZu4Xsth4wR_44yU6-5xA/-3n8REtiI6A.jpg","https://sun9-10.userapi.com/pQprij-LTwwC7DWNoPI4CGXw3_wS70l6OtUyyg/nYpBF5bKJuY.jpg","https://sun9-46.userapi.com/JnFsdanmKshkCHetGmIN-93e2X4QK0zAhIBYNA/Brq-SJr-kgo.jpg","https://sun9-14.userapi.com/CNBgsxFXMRFS7UPJNyUfxKb_krOhqLrDc3sZtQ/-h_uYiLGLcA.jpg","https://sun9-16.userapi.com/hNxjkGka1jzBZJta9cG7smu0_25NzqR9l_WL9Q/CcS7f61M2GQ.jpg","https://sun9-44.userapi.com/jksvfHftzlSQJVEALaBeloaXc1Nmvaq8J6j6dA/mbG5LDMVkgI.jpg","https://sun9-63.userapi.com/3BcLZYSDoxeRqPtdrRmcTUjibcOdrqJSrhrB1g/gpOCU96uTm8.jpg"]),l=Object(m.a)(i,2),u=l[0],o=(l[1],r.a.useRef(null),Object(a.useState)(null)),s=Object(m.a)(o,2),h=(s[0],s[1],Object(a.useState)(null)),d=Object(m.a)(h,2);d[0],d[1];return Object(a.useEffect)((function(){fetch("https://api.imgflip.com/get_memes/",{method:"GET"}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}),[]),r.a.createElement(g.i,{id:t},r.a.createElement(g.j,null,"\u041c\u0435\u043c\u0447\u0438\u043a"),r.a.createElement(g.g,{separator:"hide"},r.a.createElement(g.c,null,u.map((function(e){return r.a.createElement(g.b,{style:{padding:2,borderRadius:13,margin:0},size:"s",onClick:function(){c(e),n("constructor")}},r.a.createElement("div",{style:{height:96,backgroundImage:"url("+e+")",backgroundSize:"cover",backgroundPosition:"center 35%",backgroundRepeat:"no-repeat",borderRadius:13}}))})))))},b=n(97),j=n.n(b),w=n(98),E=n.n(w),v=n(99),O=n.n(v),x=function(e){var t=e.id,n=e.image,c=e.go,i=new Image;i.src=n;var l=Object(a.useState)(i),u=Object(m.a)(l,2),o=u[0],s=(u[1],r.a.useRef(null)),h=Object(a.useState)(""),d=Object(m.a)(h,2),p=d[0],f=d[1],b=Object(a.useState)(""),w=Object(m.a)(b,2),v=w[0],x=w[1],y=Object(a.useState)(!1),S=Object(m.a)(y,2),k=(S[0],S[1]),C=Object(a.useState)(n),T=Object(m.a)(C,2),I=T[0],R=T[1],A=Object(a.useState)(30),F=Object(m.a)(A,2),N=F[0],U=F[1];function B(e){var t=document.createElement("span");t.appendChild(document.createTextNode("height")),document.body.appendChild(t),t.style.cssText="font: "+e+"; white-space: nowrap; display: inline;";var n=t.offsetHeight;return document.body.removeChild(t),n}return Object(a.useEffect)((function(){!function(){k(!0);var e=s.current,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var n=document.getElementById("kart"),a=n.height/n.width;n.width=window.innerWidth,n.height=window.innerWidth*a,t.drawImage(n,0,0),function(e){var t=s.current,n=t.getContext("2d");n.fillStyle="#FFF",n.font="bold "+N+"px impact";for(var a=B(n.font),r=t.width,c=B(n.font),i=e.split(" "),l=i.length,u="",o=0;o<l;o++){var h=u+i[o]+" ";if(n.measureText(h).width>r){var m=(t.width-n.measureText(u).width)/2;n.fillText(u,m,c),u=i[o]+" ",c+=a}else u=h}var d=(t.width-n.measureText(u).width)/2;n.fillText(u,d,c)}(p),function(e){var t,n=s.current,a=n.getContext("2d"),r=n.width;a.font="bold "+N+"px impact",t=a.measureText(e).width>r?n.height-B(a.font)-10:n.height-B(a.font)+20,a.fillStyle="#FFF";for(var c=B(a.font),i=e.split(" "),l=i.length,u="",o=0;o<l;o++){var h=u+i[o]+" ";if(a.measureText(h).width>r){var m=(n.width-a.measureText(u).width)/2;a.fillText(u,m,t),u=i[o]+" ",t+=c}else u=h}var d=(n.width-a.measureText(u).width)/2;a.fillText(u,d,t)}(v),R(e.toDataURL("image/png"))}()})),Object(a.useEffect)((function(){var e=s.current.getContext("2d"),t=document.getElementById("kart"),n=t.height/t.width;t.width=window.innerWidth,t.height=window.innerWidth*n,e.drawImage(t,0,0)}),[]),r.a.createElement(g.i,{id:t},r.a.createElement(g.j,{left:r.a.createElement(g.k,{onClick:function(){return c("home")}})},"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043c\u0435\u043c\u0430"),r.a.createElement("img",{crossorigin:"anonymous",id:"kart",width:window.innerWidth,src:n}),r.a.createElement("img",{width:window.innerWidth,src:I}),r.a.createElement("canvas",{style:{display:"none"},ref:s,width:o.width,height:o.height||"300"}),r.a.createElement(g.f,null,r.a.createElement(g.l,{min:10,max:100,value:Number(N),onChange:function(e){return U(e)},top:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430"}),r.a.createElement(g.h,{status:p.length>0?p.length<50?"valid":"error":null,bottom:p.length+"/50",top:"\u0422\u0435\u043a\u0441\u0442 \u0432\u0435\u0440\u0445\u043d\u0435\u0439 \u0441\u0442\u0440\u043e\u043a\u0438",placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435, \u0438\u043b\u0438 \u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u043e\u043b\u0435 \u043f\u0443\u0441\u0442\u044b\u043c",value:p,onChange:function(e){return f(e.target.value)}}),r.a.createElement(g.h,{status:v.length>0?v.length<50?"valid":"error":null,bottom:v.length+"/50",top:"\u0422\u0435\u043a\u0441\u0442 \u043d\u0438\u0436\u043d\u0435\u0439 \u0441\u0442\u0440\u043e\u043a\u0438",placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435, \u0438\u043b\u0438 \u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u043e\u043b\u0435 \u043f\u0443\u0441\u0442\u044b\u043c",value:v,onChange:function(e){return x(e.target.value)}}),r.a.createElement(g.d,{multiline:!0},"\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435: \u0434\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a \u043c\u0435\u0436\u0434\u0443 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b.")),""!==p||""!==v?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.e,{style:{display:"flex"}},r.a.createElement(g.a,{before:r.a.createElement(E.a,null),size:"l",stretched:!0,style:{marginRight:8}},"\u041d\u0430 \u0441\u0442\u0435\u043d\u0443"),r.a.createElement(g.a,{before:r.a.createElement(j.a,null),size:"l",stretched:!0},"\u0412 \u0438\u0441\u0442\u043e\u0440\u0438\u044e")),r.a.createElement(g.e,null,r.a.createElement(g.a,{before:r.a.createElement(O.a,null),size:"xl"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435"))):null)},y=function(){var e=Object(a.useState)("home"),t=Object(m.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(null),l=Object(m.a)(i,2),o=l[0],d=l[1],g=Object(a.useState)(null),b=Object(m.a)(g,2),j=b[0],w=b[1],E=Object(a.useState)(null),v=Object(m.a)(E,2),O=v[0],y=v[1];Object(a.useEffect)((function(){function e(){return(e=Object(h.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,w(t),y(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;if("VKWebAppUpdateConfig"===n){var r=document.createAttribute("scheme");r.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}()}),[]);var S=function(e){c(e)};return r.a.createElement(p.a,{activePanel:n,popout:O},r.a.createElement(f,{id:"home",fetchedUser:j,go:S,setImg:d}),r.a.createElement(x,{id:"constructor",fetchedUser:j,go:S,image:o}))};u.a.send("VKWebAppInit"),i.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.c643a944.chunk.js.map